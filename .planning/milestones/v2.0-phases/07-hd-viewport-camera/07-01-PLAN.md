---
phase: 07-hd-viewport-camera
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/generate-assets.py
  - client/public/sprites/paran.png
  - client/public/sprites/faran.png
  - client/public/sprites/baran.png
  - client/public/sprites/projectiles.png
  - client/public/sprites/particle.png
  - client/public/tilesets/solarpunk_ruins.png
  - client/public/tilesets/solarpunk_living.png
  - client/public/tilesets/solarpunk_tech.png
  - client/public/tilesets/solarpunk_mixed.png
autonomous: true

must_haves:
  truths:
    - "All character spritesheets are 64x64 frames with 36 frames per character in horizontal strip layout"
    - "Projectile spritesheet is 16x16 frames with 3 role-specific frames"
    - "Particle texture is 16x16 pixels"
    - "All 4 tilesets remain at 128x64 with 32x32 tile cells (4 cols x 2 rows) -- same grid as v1.0, improved art"
    - "2x character sprites have richer detail (more shading, body features, distinct role silhouettes)"
    - "Idle breathing animation has 3 frames (frames 24-26) per character"
    - "Walk animations have 6 frames per direction (smoother than v1.0's 4 frames)"
  artifacts:
    - path: "scripts/generate-assets.py"
      provides: "2x character/projectile asset generation + improved 1x tileset art pipeline"
      contains: "FRAME_SIZE = 64"
    - path: "client/public/sprites/paran.png"
      provides: "Paran character spritesheet at 64x64 with 36 frames"
    - path: "client/public/sprites/faran.png"
      provides: "Faran character spritesheet at 64x64 with 36 frames"
    - path: "client/public/sprites/baran.png"
      provides: "Baran character spritesheet at 64x64 with 36 frames"
    - path: "client/public/sprites/projectiles.png"
      provides: "Projectile spritesheet at 16x16 with 3 frames"
    - path: "client/public/sprites/particle.png"
      provides: "Particle texture at 16x16"
    - path: "client/public/tilesets/solarpunk_ruins.png"
      provides: "Improved tileset for ruins theme at 128x64 (32x32 tiles)"
  key_links:
    - from: "scripts/generate-assets.py"
      to: "client/public/sprites/*.png"
      via: "PIL Image.save()"
      pattern: "img\\.save"
---

<objective>
Rewrite the asset generation script to produce character sprites and projectiles at 2x resolution (64x64 character frames, 16x16 projectiles) with richer pixel art detail and more animation frames (36 per character including 3-frame idle breathing). Tilesets stay at 1x resolution (32x32 tiles) but with improved art detail -- camera zoom=2 handles the visual upscaling.

Purpose: All visual assets must exist before any rendering code can be updated. Character sprites need genuine 2x detail. Tilesets stay 1x because the tilemap coordinate system must match physics coordinates (800x608 world), and camera zoom=2 cleanly upscales 32x32 tiles to 64x64 on screen via nearest-neighbor.
Output: Updated `generate-assets.py` script + all PNG assets regenerated.
</objective>

<execution_context>
@/Users/jonasbrandvik/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jonasbrandvik/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@scripts/generate-assets.py
@.planning/phases/07-hd-viewport-camera/07-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite generate-assets.py for 2x characters and improved tilesets</name>
  <files>scripts/generate-assets.py</files>
  <action>
Rewrite the entire `generate-assets.py` script. Keep the same PIL/Pillow library, directory structure, color palette constants, and output paths.

**Architecture note:** Camera zoom=2 on 1280x720 canvas = 640x360 logical viewport. Tilemap tiles are 32x32 in world space, upscaled to 64x64 on screen by zoom. Character sprites are 64x64 native pixels but displayed at 32x32 world size (setDisplaySize in Phaser), so zoom=2 renders them at their full 64x64 detail on screen. This is why tilesets stay 1x and characters go 2x.

**Character Spritesheets (paran.png, faran.png, baran.png):**
- Frame size: 64x64 pixels each
- 36 frames per character in horizontal strip (2304x64 PNG)
- Frame layout:
  - Walk Down: frames 0-5 (6 frames)
  - Walk Up: frames 6-11 (6 frames)
  - Walk Right: frames 12-17 (6 frames)
  - Walk Left: frames 18-23 (6 frames)
  - Idle: frames 24-26 (3 frames, breathing/bobbing)
  - Shoot: frames 27-29 (3 frames)
  - Death: frames 30-35 (6 frames)
- Art quality at 64x64 (NOT naive upscale of 32x32):
  - More body detail: visible head, torso, arms, legs as distinct shapes
  - 3-4 shading tones per character color (highlight, base, shadow, deep shadow)
  - Character identity features:
    - Paran: round Pac-Man-like body shape, prominent mouth, gold highlights, speed streaks in walk frames
    - Faran: ninja silhouette, mask/scarf detail, red energy accents, sleek pose
    - Baran: armored body, helmet/visor, green with bronze trim, wider stance
  - Visible eyes (white with dark pupil, 2-3 pixels)
  - Walk cycles with actual limb movement (arm swing, leg stride), not just frame-to-frame color shifts
  - Idle breathing: 1-2 pixel vertical body shift across 3 frames (frame 24=neutral, 25=up, 26=neutral or down)
  - Shoot: arm extension or energy emanation pose (3 progressive frames)
  - Death: 6 frames of progressive dissolution (fade out parts, scatter pixels)

**Projectile Spritesheet (projectiles.png):**
- Frame size: 16x16 pixels each
- 3 frames horizontal strip (48x16 PNG): paran=0, faran=1, baran=2
- Energy projectile with bright core (3-4px) + glow border (1-2px), role-colored
- More detail than v1.0's 8x8: visible directional shape (teardrop/arrow), inner gradient

**Particle Texture (particle.png):**
- 16x16 pixels, soft circular gradient (bright white center fading to transparent edge)
- Used for runtime tinting by ParticleFactory

**Tilesets (solarpunk_ruins.png, solarpunk_living.png, solarpunk_tech.png, solarpunk_mixed.png):**
- STAY at 1x resolution: 128x64 PNG (4 cols x 2 rows of 32x32 tiles)
- Same 8 tile types as v1.0 (floor, floor variant, wall, heavy/medium/light obstacle, 2 decorations)
- Improved art within 32x32: more shading gradients, better surface textures, clearer visual distinction between tile types
- Each tileset maintains its distinct theme:
  - Ruins: stone textures, moss patches, cracks
  - Living: grass/leaf textures, flower accents, wood grain
  - Tech: panel lines, circuit traces, metallic sheen
  - Mixed: combination elements

Add helper functions as needed: `draw_rect(img, x, y, w, h, color)`, `draw_ellipse(img, x, y, w, h, color)`, `draw_line(img, x1, y1, x2, y2, color)`, `fill_gradient(img, x, y, w, h, color_top, color_bottom)`.
  </action>
  <verify>Run `python3 scripts/generate-assets.py` and verify:
1. Script completes without errors
2. `python3 -c "from PIL import Image; img=Image.open('client/public/sprites/paran.png'); print(f'{img.width}x{img.height}')"` outputs `2304x64`
3. `python3 -c "from PIL import Image; img=Image.open('client/public/sprites/projectiles.png'); print(f'{img.width}x{img.height}')"` outputs `48x16`
4. `python3 -c "from PIL import Image; img=Image.open('client/public/sprites/particle.png'); print(f'{img.width}x{img.height}')"` outputs `16x16`
5. `python3 -c "from PIL import Image; img=Image.open('client/public/tilesets/solarpunk_ruins.png'); print(f'{img.width}x{img.height}')"` outputs `128x64`
6. All 4 tileset PNGs exist at 128x64
  </verify>
  <done>All 10 asset files regenerated. Character sheets are 2304x64 (36 frames at 64x64) with richer art. Projectiles are 48x16 (3 frames at 16x16). Particle is 16x16. Tilesets remain 128x64 (32x32 tiles) with improved art detail. Script runs clean.</done>
</task>

</tasks>

<verification>
- `python3 scripts/generate-assets.py` runs without errors
- Character spritesheets are 2304x64 (36 frames x 64px)
- Projectile spritesheet is 48x16 (3 frames x 16px)
- Particle is 16x16
- Tilesets are 128x64 (stays 1x -- camera zoom handles upscaling)
</verification>

<success_criteria>
All game character and projectile assets exist at 2x resolution with richer detail, tilesets have improved art at 1x, ready for BootScene to load at new frame sizes.
</success_criteria>

<output>
After completion, create `.planning/phases/07-hd-viewport-camera/07-01-SUMMARY.md`
</output>
