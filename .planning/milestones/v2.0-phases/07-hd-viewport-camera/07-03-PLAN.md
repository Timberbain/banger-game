---
phase: 07-hd-viewport-camera
plan: 03
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - client/src/scenes/BootScene.ts
autonomous: true

must_haves:
  truths:
    - "BootScene loads character spritesheets at 64x64 frame size"
    - "BootScene loads projectile spritesheet at 16x16 frame size"
    - "All animation registrations use the 36-frame layout (6-frame walks, 3-frame idle, 3-frame shoot, 6-frame death)"
    - "Idle animation is a 3-frame breathing cycle at ~3fps for all 3 roles"
    - "BootScene title screen renders correctly at 1280x720 (background fills screen, text centered)"
    - "Map JSON files are NOT modified -- tiles stay 32x32 because camera zoom=2 handles visual upscaling"
  artifacts:
    - path: "client/src/scenes/BootScene.ts"
      provides: "2x asset loading and 36-frame animation registration plus 1280x720 title screen"
      contains: "frameWidth: 64"
  key_links:
    - from: "client/src/scenes/BootScene.ts"
      to: "client/public/sprites/*.png"
      via: "this.load.spritesheet with frameWidth/frameHeight 64"
      pattern: "frameWidth: 64.*frameHeight: 64"
---

<objective>
Update BootScene to load 2x sprite assets at correct frame sizes and register all animations with the new 36-frame layout. Also update the title screen to render correctly at 1280x720.

Purpose: Without correct frame sizes in the spritesheet loader, sprites render as garbled slices of the wrong portion of the image. The animation registrations must match the new frame indices. The title screen must fill the 1280x720 canvas.
Output: BootScene loading 64x64 character sprites, 16x16 projectiles, with all animations correctly registered.
</objective>

<execution_context>
@/Users/jonasbrandvik/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jonasbrandvik/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@client/src/scenes/BootScene.ts
@.planning/phases/07-hd-viewport-camera/07-RESEARCH.md
@.planning/phases/07-hd-viewport-camera/07-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update BootScene asset loading, animations, and title screen for HD</name>
  <files>client/src/scenes/BootScene.ts</files>
  <action>
**preload() -- Update frame sizes:**
- Character spritesheets: `{ frameWidth: 64, frameHeight: 64 }` (was 32x32)
- Projectile spritesheet: `{ frameWidth: 16, frameHeight: 16 }` (was 8x8)
- Update comments to reflect "64x64 frames, 36 frames each" and "16x16 frames, 3 frames"
- Particle image load stays the same (image, not spritesheet)

**create() -- Replace animation registration with 36-frame layout:**
Replace the entire animation registration loop with:

Walk Down: frames 0-5 (6 frames), frameRate 10, repeat -1
Walk Up: frames 6-11 (6 frames), frameRate 10, repeat -1
Walk Right: frames 12-17 (6 frames), frameRate 10, repeat -1
Walk Left: frames 18-23 (6 frames), frameRate 10, repeat -1
Idle: frames 24-26 (3 frames), frameRate 3, repeat -1  (slow breathing)
Shoot: frames 27-29 (3 frames), frameRate 10, repeat 0
Death: frames 30-35 (6 frames), frameRate 10, repeat 0

Walk frameRate goes from 8 to 10 (6 frames at 10fps = 0.6s cycle, comparable to 4 frames at 8fps = 0.5s).

**create() -- Update title screen positions for 1280x720:**
- Splash background: `splashBg.setDisplaySize(1280, 720)` (was 800, 600)
- Dark overlay rectangle: `this.add.rectangle(640, 360, 1280, 720, ...)` (was 400, 300, 800, 600)
- Sparkle X range: `Phaser.Math.Between(60, 1220)` (was 40, 760)
- Sparkle Y range: `Phaser.Math.Between(50, 670)` (was 40, 560)
- Left vine X coordinates: scale proportionally (multiply by 1.6, roughly 80, 96, 72, 104, 80 for x values)
- Left vine Y coordinates: scale proportionally (multiply by 1.2, roughly 120, 240, 360, 480, 600)
- Right vine X coordinates: mirror at 1280 (roughly 1200, 1184, 1208, 1176, 1200)
- Right vine Y coordinates: same as left vine Y
- Title, subtitle, and click-to-start text already use `this.cameras.main.centerX/centerY` -- no change needed
  </action>
  <verify>
1. `grep -n "frameWidth: 64" client/src/scenes/BootScene.ts` shows 3 lines (one per character)
2. `grep -n "frameWidth: 16" client/src/scenes/BootScene.ts` shows 1 line (projectiles)
3. `grep -n "start: 24, end: 26" client/src/scenes/BootScene.ts` shows idle animation
4. `grep -n "start: 0, end: 5" client/src/scenes/BootScene.ts` shows 6-frame walk-down
5. `grep -n "frameRate: 3" client/src/scenes/BootScene.ts` shows slow idle breathing
6. `grep -n "1280" client/src/scenes/BootScene.ts` shows updated display sizes
7. No references to `frameWidth: 32` remain
  </verify>
  <done>BootScene loads all sprites at 2x frame sizes (64x64 characters, 16x16 projectiles), registers 36-frame animations with idle breathing, and title screen fills 1280x720 canvas.</done>
</task>

</tasks>

<verification>
- BootScene spritesheet loading uses frameWidth: 64 for characters, 16 for projectiles
- All 7 animation types registered per role with correct frame ranges
- Idle breathing is 3 frames at 3fps
- Title screen fills 1280x720 (no 800x600 remnants)
</verification>

<success_criteria>
Assets load at correct 2x frame sizes, animations match the 36-frame layout, and the title screen renders properly at 1280x720. The game can boot without visual corruption of sprites.
</success_criteria>

<output>
After completion, create `.planning/phases/07-hd-viewport-camera/07-03-SUMMARY.md`
</output>
